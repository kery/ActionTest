name: Release for Windows

on: workflow_dispatch

jobs:
  release:
    permissions: write-all
    runs-on: windows-latest
    steps:
      - name: Install Qt
        uses: jurplel/install-qt-action@v3
        with:
          version: '5.15.2'
          host: 'windows'
          target: 'desktop'
          arch: 'win64_msvc2019_64'
          tools: 'tools_opensslv3_x64'
          
      - name: Install OpenSSL v1.1.1
        run: |
          curl -O http://ftp.vim.org/languages/qt/online/qtsdkrepository/windows_x86/desktop/.tools_openssl_x64/qt.tools.openssl.win_x64/1.1.1-22openssl_1.1.1v_prebuild_x64.7z
          cd %IQTA_TOOLS%
          cd ..
          7z x 1.1.1-22openssl_1.1.1v_prebuild_x64.7z
          dir %IQTA_TOOLS%
